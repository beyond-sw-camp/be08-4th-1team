import{_ as $,E as c,I as W,o as b,l as I,v as l,j as T,k as s,A as o,t as v,q as E,M as H,N as x,O as C,P as R,x as i,J as r,Q as M,S as d,V as u,F as j,z as O,n as P,L as Q,W as z}from"./index-BaXTvT8w.js";import{a as _,s as K}from"./index-BQp_UNXb.js";import{s as q}from"./index-BWH2JpRW.js";import"./index-DRPdype-.js";const w=a=>(x("data-v-5572f858"),a=a(),C(),a),G={key:0,class:"student-details"},J=w(()=>s("strong",null,"이름:",-1)),Y=w(()=>s("strong",null,"개강일:",-1)),X=w(()=>s("strong",null,"상태:",-1)),Z=w(()=>s("strong",null,"출석률:",-1)),ee={__name:"StudentDetailModal",props:{student:Object,visible:Boolean},emits:["update:visible"],setup(a,{emit:y}){const S=a,m=y,h=c(S.visible);W(()=>S.visible,n=>{h.value=n});function D(n){h.value=n,m("update:visible",n)}function g(n){return n.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}return(n,f)=>{const N=H;return b(),I(N,{visible:h.value,header:"학생 상세 정보",modal:!0,closable:!0,"onUpdate:visible":D,style:{width:"500px",maxWidth:"90vw"}},{default:l(()=>[a.student?(b(),T("div",G,[s("p",null,[J,o(" "+v(a.student.name),1)]),s("p",null,[Y,o(" "+v(g(a.student.date)),1)]),s("p",null,[X,o(" "+v(a.student.status),1)]),s("p",null,[Z,o(" "+v(a.student.activity)+"%",1)])])):E("",!0)]),_:1},8,["visible"])}}},te=$(ee,[["__scopeId","data-v-5572f858"]]),F=a=>(x("data-v-49ce652f"),a=a(),C(),a),ae={class:"card"},se=F(()=>s("div",{class:"font-semibold text-xl mb-4"},"전체 학생 목록",-1)),le={class:"flex justify-between items-center"},oe={class:"flex gap-2"},ne={class:"relative search-container"},ie=F(()=>s("i",{class:"pi pi-search search-icon"},null,-1)),re={__name:"StudentListPage",setup(a){const y=c([]),S=c([]),m=c(null),h=c(!0),D=c(null),g=c(!1),n=c([]),f=c(null);async function N(){try{const t=await M.get("http://localhost:8080/api/studentList",{headers:{"Content-Type":"application/json"}});y.value=t.data,S.value=f.value?y.value.filter(p=>p.className===f.value):y.value,h.value=!1}catch(t){console.error("Failed to fetch student list:",t),h.value=!1}}async function L(){try{const t=await M.get("http://localhost:8080/api/classNames",{headers:{"Content-Type":"application/json"}});n.value=t.data}catch(t){console.error("Failed to fetch class names:",t)}}function k(t){f.value===t?f.value=null:f.value=t,N()}function V(){m.value={global:{value:null,matchMode:d.CONTAINS},studentName:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},address:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},email:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},phone:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},classNo:{operator:u.AND,constraints:[{value:null,matchMode:d.EQUALS}]},className:{operator:u.AND,constraints:[{value:null,matchMode:d.EQUALS}]},teacher:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},openDt:{operator:u.AND,constraints:[{value:null,matchMode:d.DATE_IS}]},closeDt:{operator:u.AND,constraints:[{value:null,matchMode:d.DATE_IS}]}}}function U(t){console.log("해당 학생 정보 : ",t.data),D.value=t.data,g.value=!0}function A(t){return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}function B(t){return t==="Active"?"success":"warning"}return R(()=>{N(),L(),V()}),(t,p)=>(b(),T("div",ae,[se,i(r(K),{value:S.value,paginator:!0,rows:10,dataKey:"studentNo",rowHover:!0,filters:m.value,"onUpdate:filters":p[1]||(p[1]=e=>m.value=e),filterDisplay:"menu",loading:h.value,globalFilterFields:["studentName","className","address","email"],showGridlines:"",onRowClick:U},{header:l(()=>[s("div",le,[s("div",oe,[(b(!0),T(j,null,O(n.value,e=>(b(),I(r(Q),{key:e,type:"button",label:e,outlined:"",class:P({active:f.value===e}),onClick:de=>k(e)},null,8,["label","class","onClick"]))),128))]),s("div",ne,[ie,i(r(z),{modelValue:m.value.global.value,"onUpdate:modelValue":p[0]||(p[0]=e=>m.value.global.value=e),placeholder:"Keyword Search",class:"pl-8"},null,8,["modelValue"])])])]),empty:l(()=>[o(" No students found. ")]),loading:l(()=>[o(" Loading student data. Please wait. ")]),default:l(()=>[i(r(_),{field:"className",header:"기 수",style:{"min-width":"12rem"}},{body:l(({data:e})=>[o(v(e.className),1)]),_:1}),i(r(_),{field:"studentName",header:"이 름",style:{"min-width":"12rem"}},{body:l(({data:e})=>[o(v(e.studentName),1)]),_:1}),i(r(_),{field:"address",header:"주 소",style:{"min-width":"12rem"}},{body:l(({data:e})=>[o(v(e.address),1)]),_:1}),i(r(_),{field:"openDt",header:"개강일",dataType:"date",style:{"min-width":"10rem"}},{body:l(({data:e})=>[o(v(A(new Date(e.openDt))),1)]),_:1}),i(r(_),{field:"closeDt",header:"종강일",dataType:"date",style:{"min-width":"10rem"}},{body:l(({data:e})=>[o(v(A(new Date(e.closeDt))),1)]),_:1}),i(r(_),{field:"status",header:"상 태",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:l(({data:e})=>[i(r(q),{value:e.status,severity:B(e.status)},null,8,["value","severity"])]),_:1})]),_:1},8,["value","filters","loading"]),i(te,{student:D.value,visible:g.value,"onUpdate:visible":p[2]||(p[2]=e=>g.value=e)},null,8,["student","visible"])]))}},me=$(re,[["__scopeId","data-v-49ce652f"]]);export{me as default};
